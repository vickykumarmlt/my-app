def name="vikam"
pipeline{
	agent any
	tools 
	 {
	 maven 'Apache Maven 3.6.0'
	 } 
	   options {
                skipDefaultCheckout() // removes the "Declarative Checkout SCM" stage
    }
   	
	stages{
		
		stage('SCM-Checkout'){
			steps{
				git 'https://github.com/vickykumarmlt/my-app'
			} }   		
		stage('Package'){
			steps{
				sh """
				set +x
				#!/bin/bash mvn clean package
				echo i Said, Hi Mr. ${name}
				"""
			}
		}
		stage('deploy'){
			when {
              			expression {
                		currentBuild.result == null || currentBuild.result == 'SUCCESS' 
              				   }
            			}
			steps{
				sh "java -cp /var/lib/jenkins/workspace/my-app-pipeline/target/my-app-1.0-SNAPSHOT.jar com.mycompany.app.App" 
				}
			}
	}

}
